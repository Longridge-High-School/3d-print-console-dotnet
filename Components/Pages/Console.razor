@page "/"
@using _3d_print_console_dotnet.Components.Layout
@layout ConsoleLayout

@inject NavigationManager nav

<PageTitle>3D Print Console .NET</PageTitle>

<script type = "text/JavaScript">
    sessionStorage.setItem ("IS_3D_PRINT_CONSOLE_DOTNET", "true");
</script>

@code
{
    #if DEBUG
        string filePath = System.IO.Path.Combine (System.IO.Directory.GetCurrentDirectory (), "wwwroot", "console.html");
    #else
        string filePath = System.IO.Path.Combine (AppDomain.CurrentDomain.BaseDirectory, "wwwroot", "console.html");   
    #endif
}

@if (File.Exists (filePath))
{
    <object data = "console.html" style = "position: fixed; width: 100%; height: 100vh; top: 0; left: 0;" />
    <button type = "button" class = "btn btn-primary" @onclick = '() => nav.NavigateTo("/admin", true)' style = "position: fixed; bottom: 0; right: 0; margin-right: 35px; margin-bottom: 10px; z-index: 100;">⚙️ Settings</button>
}
else
{
    <div style = "background-color: #252D5C; width: 100%; height: 100vh;" class = "position-relative">
        <main class = "position-absolute top-50 start-50 translate-middle px-5 py-5 fs-2" style = "background-color: white; text-align: center;">
            <p>⚠️ You need to download a version of 3D Print Console!</p>
            <p>Click <a href = "/login">here</a> to sign in and pick a version.</p>
        </main>
    </div> 
    }